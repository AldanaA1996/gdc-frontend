<body
  class="absolute w-full min-h-screen overflow-x-hidden bg-slate-100 dark:bg-slate-950"
>
  <main class="flex flex-1 flex-col h-[100%] w-full max-w-md mx-auto">
    <slot />
  </main>

  <script>
    // This is a hack to get vite-plugin-pwa to generate a sw.js file.
    // Do not remove this script tag.
  </script>
  <script is:inline>
    const getThemePreference = () => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
      return window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light";
    };
    const isDark = getThemePreference() === "dark";
    document.documentElement.classList[isDark ? "add" : "remove"]("dark");

    if (typeof localStorage !== "undefined") {
      const observer = new MutationObserver(() => {
        const isDark = document.documentElement.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["class"],
      });
    }
  </script>
</body>
