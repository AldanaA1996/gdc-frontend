---
import Layout  from "../components/Layout/Layout.astro";
import LayoutPage from "../components/Layout/LayoutPage.astro";
import { useAuthenticationStore } from "@/app/store/authentication";
import "../styles/global.css"

---
<script is:inline>
	import { useEffect } from "react";
	import { useAuthenticationStore } from "@/app/store/authentication";

	const token = useAuthenticationStore.getState().token;

	useEffect(() => {
		if (token) {
			window.location.href= "/app"; 
		}
	}, []);

	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};
	const isDark = getThemePreference() === 'dark';
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark');
 
	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark');
			localStorage.setItem('theme', isDark ? 'dark' : 'light');
		});
		observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
	}
</script>



<script>
	document.addEventListener('DOMContentLoaded', () => {
		const getThemePreference = () => {
			if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
				return localStorage.getItem('theme');
			}
			return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
		};
		const isDark = getThemePreference() === 'dark';
		document.documentElement.classList[isDark ? 'add' : 'remove']('dark');

		if (typeof localStorage !== 'undefined') {
			const observer = new MutationObserver(() => {
				const isDark = document.documentElement.classList.contains('dark');
				localStorage.setItem('theme', isDark ? 'dark' : 'light');
			});
			observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
		}
	});
</script>

<style>
	.hero-section {
		background-image: url('/images/bgStockly.png');
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
		background-attachment: fixed;
		min-height: 100vh;
	
		display: flex;
		align-items: center;
		justify-content: center;
		position: relative;
	}

	/* Overlay para mejorar la legibilidad del texto */
	.hero-section::before {
		content: '';
		position: absolute;

		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		
		z-index: 1;
	}

	.hero-content {
		position: relative;
		z-index: 2;
		text-align: center;
		color: #547C7D;
		max-width: 600px;
		width: 95%;
		padding: 2rem;
	}

	.hero-logo {
		width: 180px;
		height: 180px;
		border-radius: 50%;
		margin: 0 auto 2rem;
		filter: drop-shadow(0 4px 8px rgba(129, 128, 128, 0.3));
	}

	.hero-title {
		font-size: 3rem;
		font-weight: bold;
		margin-bottom: 1rem;
		text-shadow: 2px 2px 4px rgba(104, 102, 102, 0.5);
	}

	.hero-subtitle {
		font-size: 1.25rem;
		margin-bottom: 2rem;
		opacity: 0.9;
		text-shadow: 1px 1px 2px rgba(104, 102, 102, 0.5);
	}

	.hero-button {
		display: inline-block;
		padding: 0.75rem 2rem;
		background: #547C7D;
		color: white;
		text-decoration: none;
		border-radius: 0.5rem;
		font-weight: 600;
		transition: all 0.3s ease;
		/* box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); */
	}

	.hero-button:hover {
		transform: translateY(-2px);
		background: #d9f0f0;
		color: #547C7D;
	}

	/* Responsive design */
	@media (max-width: 768px) {
		.hero-section {
			background-attachment: scroll; /* Mejor rendimiento en m√≥viles */
		}

		.hero-logo {
			width: 140px;
			height: 140px;
			border-radius: 50%;
		}

		.hero-title {
			font-size: 2.5rem;
		}

		.hero-subtitle {
			font-size: 1.1rem;
		}
	}
</style>

<Layout title="STOCKLY">
	<LayoutPage>
		<section class="hero-section">
			
			<div class="hero-content bg-white/30 backdrop-blur border-b border-white/30 rounded-xl ">
				<img src="/images/logo.jpg" alt="Logo STOCKLY" class="hero-logo" />
				<h1 class="hero-title">Bienvenido a STOCKLY</h1>
				<p class="hero-subtitle">Manejo de stock simple y eficiente</p>
				<a href="/login" class="hero-button">
					Entrar
				</a>
			</div>
		</section>
	</LayoutPage>
</Layout>
